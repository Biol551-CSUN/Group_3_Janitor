---
title: "test 3"
author: "Nicole Ayala"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: TRUE
    toc_float: TRUE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      warning = FALSE,
                      message =FALSE)
```

##  All about Janitor's function: tabyl()

In data science, all analysts do is basically count several things, taking into consideration many factors. Base R's table() function has many limitations when it comes to piping as it does not accept data.frame inputs or output data.frames. Formatting is pretty difficult unlike using other software like excel or SPSS. So janitor's function: tabyl() makes it so much easier to organize all data.frames, inputs and outputs accordingly while following the forward pipe operator. 

Tabyl() was actually built on dplyr and tidyr packages as well as works well with tidyverse. It produces frequency tables with 1-3 tables containing specific metadata so that is why adorn() functions are used alongside with tabyl(), yet it can work with other non-tabyl associated data.frames to format those as well.

```{r}
# LOAD THE LIBRARIES
library(tidyverse)
library(dplyr)
library(tidyr)
library(here)
library(janitor)

# LOAD THE DATA
drugs<-read.csv(here("Nicole","Data","drugs.csv"))
glimpse(drugs)
#View(drugs)

drugs_df <- drugs %>%
   filter(therapeutic_area == "Schizophrenia") # only want Schizophrenia data to be put inside my tabyl
   head(drugs_df,10)
   
drugs <- drugs %>%
   filter(decision_date>"2022") # only want the dates from 2023
  head(drugs,15)

```
```{r}
drugs %>%
  tabyl(category, authorisation_status, therapeutic_area, show_missing_levels = FALSE) %>%
  adorn_totals("row") %>%
  adorn_percentages("all") %>%
  adorn_pct_formatting(digits = 1) %>%
  adorn_ns %>%
  adorn_title
```



```{r}
# FILTER THE DATA
  
t1 <- drugs %>%
  
   tabyl(decision_date,category,therapeutic_area,15)

 t1
 
 
    

```
```{r}
#t1 <- drugs %>%
    #tabyl(active_substance) # this table will only consider freq based on the variable active substance
#t1  # this will have the entire list of active substances

#t2 <- drugs %>% # table onyl considers few based on variable medicine _name
#   tabyl(medicine_name)
#t2 # this will only have the list of all the names of the medicines provided in the dataset

# If N/As are present then tabyl() will make a separate percentages column


```
FUN FACT: If N/As are present then tabyl() will make a separate percentages column

### Now that we have a tabyl(), how do we format it in a way that only shows each active substance's name once but counts the total of each one. This is where the adorn() functions come into play to help us format the columns, rows, titles, etc exactly how we want them to look.




##